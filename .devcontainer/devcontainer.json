{
  "name": "Flair Codespace",
  "build": {
    "dockerfile": "Dockerfile.codespaces",
    "context": ".."
  },
  "remoteUser": "root",
  "privileged": true,
  "forwardPorts": [10000],
  "portsAttributes": {
    "10000": {
      "label": "Gnome Terminal (XPRA)",
      "onAutoForward": "openBrowser"
    }
  },

  "postCreateCommand": "bash -c 'source ~/.bashrc' && /usr/local/bin/flair_compile_all_non_interactive.sh",
  "postStartCommand": "xpra start --no-daemon --bind-tcp=0.0.0.0:10000 --html=on --start=gnome-terminal",
  
  "workspaceFolder": "/root/",
  "customizations": {
    "vscode": {
      "settings": {
        "C_Cpp.default.configurationProvider": "ms-vscode.cmake-tools",
        "cmake.configureOnOpen": true,
        "files.exclude": {
          "**/.git": true,
          "build": true,
          "**/*.code-workspace": true
        }
      },
      "extensions": [
        "ms-vscode.cpptools-extension-pack",
        "ms-vscode.cmake-tools"
      ]
    }
  }
}